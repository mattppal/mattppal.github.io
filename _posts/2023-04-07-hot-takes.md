---
layout: post
title: "üå∂Ô∏è Hot Takes - Data Transformation"
categories: data
published: true

---
## üö® Warning: (potentially) unpopular opinions ahead üö®

I've been thinking for the past few weeks about the data transformation landscape‚Äî both from my own viewpoint _and_ what I've seen elsewhere. I've been lucky to see data teams across a range of maturities, but a few commonalities stand out.

## dbt

‚ùóÔ∏è **dbt (currently) lacks functionality necessary to live at the heart of the MDS.**

I'd really love to be wrong here, but in my experience with dbt Core, there's so much to be desired. While dbt was _revolutionary_ in 2018, very little has changed since then. The lack of column-level lineage, extremely basic documentation site, and manual nature of the product scream potential for an incumbent to provide _extraordinary value_ (and potentially eat their lunch). To implement dbt from scratch, one of the following is necessary:

- Know someone who can guide you through common pitfalls.
- Do an ungodly amount of research to find the libraries necessary to automate the painful parts.
- Grind through the implementation, make a ton of mistakes, and re-write your entire codebase.

To me, dbt will always live on as a _framework_. By no means am I dismissing the value of the tool, but the architecture of dbt is extremely outdated. Like Airflow, this is a major disadvantage, since a full rewrite would be required to implement functionality that would make it competitive. I suspect the dbt team realizes this, hence their shift in stance towards "enabling an ecosystem" for issues like [column level lineage](https://github.com/dbt-labs/dbt-core/discussions/4458). Furthermore, dbt lacks what [Google's Dataform](https://cloud.google.com/dataform) now provides: end-to-end integration with their stack at no additional cost. 

It's unbeknownst to me why Google hasn't invested more in the Dataform + BigQuery experience, since it's an insane opportunity. As I'll discuss later, many are jumping ship from Redshift to BigQuery or Snowflake. The potential for Google to roll out a "data environment in a box" is super enticing, but who know's what's going on over there? üßê

The dbt situation is odd. Vendors and libraries are springing up whose main purpose is to cover dbt's shortcomings with advanced lineage, observability, and metadata capabilities (with some success), but that doesn't really solve the problem. It's not efficient or feasible for a practitioner to go "shopping" for every single component of a transformation framework‚Äî we need a tool that does it all (and well).

## Data Warehousing

‚ùóÔ∏è **Deploying "production" data warehouses is unnecessarily hard and gated by tribal knowledge.**

I've had the fortune of working with several data warehousing technologies. While developments in the past half decade have centered around abstracting DevOps from the data warehouse equation (i.e. separation of storage and compute, introduction of serverless architecture, autoscaling, etc.), little has been done to simplify the process of actually _deploying_ a data warehouse.

Take, for example, creating a test/production environment. This is a relatively trivial problem that's actually become easier in products like Snowflake with [zero-copy clones](https://community.snowflake.com/s/question/0D50Z00009C3VlMSAV/zero-copy-cloning), but for tools like Redshift or BigQuery, it's necessary to architect some unnecessarily complex process‚Äî either restoring a snapshot nightly to a test cluster or programmatically generating SQL. The worst part: most of the clever solutions to this problem are buried in forums/Slack/etc. Once again, knowing someone who's solved this problem _for your specific warehouse_ can be a huge time saver.

Separately, managing permissions is also a headache. This is something that could be (arguably) more baked-in to a transformation tool like dbt (I have qualms with their [permission guidelines](https://docs.getdbt.com/blog/configuring-grants) as well, but don't get me started). While GitLab manages an [open-source tool](https://about.gitlab.com/handbook/business-technology/data-team/platform/permifrost/) for Snowflake permissions, I have yet to find an equivalent for Redshift and have resorted to writing Terraform, which only accomplishes about half of what I was hoping for.

I believe this functionality should be standard in a data warehouse in 2023. Perhaps there's opportunity for a product that can roll-out and maintain dev/stage/prod environments across vendors or make permissions management a breeze.

## AWS

‚ùóÔ∏è **Redshift is no longer a true competitor in the warehouse space.**

Similar to the Google Dataform situation, this is a bit of an enigma. Having practically **invented** cloud storage and dominating the space on a number of fronts, Amazon has completely let Redshift go in the last few years.

Almost every improvement has come as a response to competitors like Snowflake and BigQuery innovating on storage, compute, and serverless. This is despite the fact that there's a wild competitive advantage for Redshift, given zero-cost copying from S3 and the _potential_ for tighter integration all of Amazon's services. Still, we lack functionality like _uploading a CSV directly to a table_ üòí (not only is this possible in BigQuery, but Google Sheets can be synced directly to tables).

Amazon is finally rolling out features like [AUTO-COPY](https://aws.amazon.com/about-aws/whats-new/2022/11/amazon-redshift-supports-auto-copy-amazon-s3/), but at a snail's pace‚Äî it's been in preview for the past 6 months! I see tremendous opportunity for players like Amazon and Google (that have cloud services) to innovate on the data side, but it appears to be less of a priority. For example, why isn't it possible to natively couple a production database to an OLAP store and provide out-of-the-box CDC? This is more of a "data warehouse in a box" type stuff, but for 99% of companies it will save weeks/months of time (and reduce Fivetran bills).

As data continues to become an essential, maybe we'll see movement... or a disruptive competitor. In the meantime, I feel Snowflake and BigQuery are miles ahead of Redshift, which is quickly trending towards an obsolete product.

## Airflow

‚ùóÔ∏è **Airflow is obsolete.**

